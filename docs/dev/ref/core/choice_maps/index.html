<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Choice Maps · Gen.jl</title><meta name="title" content="Choice Maps · Gen.jl"/><meta property="og:title" content="Choice Maps · Gen.jl"/><meta property="twitter:title" content="Choice Maps · Gen.jl"/><meta name="description" content="Documentation for Gen.jl."/><meta property="og:description" content="Documentation for Gen.jl."/><meta property="twitter:description" content="Documentation for Gen.jl."/><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../search_index.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">Gen.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../../">Gen.jl</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../tutorials/getting_started/">Getting Started</a></li><li><a class="tocitem" href="../../../tutorials/modeling_in_gen/">Introduction to Modeling in Gen</a></li><li><a class="tocitem" href="../../../tutorials/mcmc_map/">Basics of MCMC and MAP Inference</a></li><li><a class="tocitem" href="../../../tutorials/enumerative/">Debugging Models with Enumeration</a></li><li><a class="tocitem" href="../../../tutorials/smc/">Object Tracking with SMC</a></li><li><a class="tocitem" href="../../../tutorials/vi/">Variational Inference in Gen</a></li><li><a class="tocitem" href="../../../tutorials/learning_gen_fns/">Learning Generative Functions</a></li><li><a class="tocitem" href="../../../tutorials/scaling_with_sml/">Speeding Up Inference with the SML</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">How-to Guides</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../how_to/extending_gen/">Extending Gen</a></li><li><a class="tocitem" href="../../../how_to/custom_distributions/">Adding New Distributions</a></li><li><a class="tocitem" href="../../../how_to/custom_gen_fns/">Adding New Generative Functions</a></li><li><a class="tocitem" href="../../../how_to/custom_gradients/">Custom Gradients</a></li><li><a class="tocitem" href="../../../how_to/custom_incremental_computation/">Custom Incremental Computation</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox" checked/><label class="tocitem" for="menuitem-4"><span class="docs-label">Reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-4-1" type="checkbox" checked/><label class="tocitem" for="menuitem-4-1"><span class="docs-label">Core Interfaces</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../gfi/">Generative Function Interface</a></li><li class="is-active"><a class="tocitem" href>Choice Maps</a></li><li><a class="tocitem" href="../selections/">Selections</a></li><li><a class="tocitem" href="../change_hints/">Change Hints</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-2" type="checkbox"/><label class="tocitem" for="menuitem-4-2"><span class="docs-label">Modeling Library</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../modeling/dml/">Built-In Modeling Language</a></li><li><a class="tocitem" href="../../modeling/sml/">Static Modeling Language</a></li><li><a class="tocitem" href="../../modeling/distributions/">Probability Distributions</a></li><li><a class="tocitem" href="../../modeling/combinators/">Combinators</a></li><li><a class="tocitem" href="../../modeling/custom_gen_fns/">Custom Generative Functions</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-3" type="checkbox"/><label class="tocitem" for="menuitem-4-3"><span class="docs-label">Inference Library</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../inference/enumerative/">Enumerative Inference</a></li><li><a class="tocitem" href="../../inference/importance/">Importance Sampling</a></li><li><a class="tocitem" href="../../inference/mcmc/">Markov Chain Monte Carlo</a></li><li><a class="tocitem" href="../../inference/pf/">Particle Filtering &amp; SMC</a></li><li><a class="tocitem" href="../../inference/trace_translators/">Trace Translators</a></li><li><a class="tocitem" href="../../inference/parameter_optimization/">Parameter Optimization</a></li><li><a class="tocitem" href="../../inference/map/">MAP Optimization</a></li><li><a class="tocitem" href="../../inference/vi/">Variational Inference</a></li><li><a class="tocitem" href="../../inference/wake_sleep/">Wake-Sleep Learning</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-4" type="checkbox"/><label class="tocitem" for="menuitem-4-4"><span class="docs-label">Internals</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../internals/language_implementation/">Modeling Language Implementation</a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Reference</a></li><li><a class="is-disabled">Core Interfaces</a></li><li class="is-active"><a href>Choice Maps</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Choice Maps</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/probcomp/Gen.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/probcomp/Gen.jl/blob/master/docs/src/ref/core/choice_maps.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Choice-Maps"><a class="docs-heading-anchor" href="#Choice-Maps">Choice Maps</a><a id="Choice-Maps-1"></a><a class="docs-heading-anchor-permalink" href="#Choice-Maps" title="Permalink"></a></h1><p>Maps from the addresses of random choices to their values are stored in associative tree-structured data structures that have the following abstract type:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gen.ChoiceMap" href="#Gen.ChoiceMap"><code>Gen.ChoiceMap</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">abstract type ChoiceMap end</code></pre><p>Abstract type for maps from hierarchical addresses to values.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/probcomp/Gen.jl/blob/0d40e48d1f37680e7b0675ac5d37b1d26c1efeb2/src/choice_map.jl#L63-L67">source</a></section></article><p>Choice maps are constructed by users to express observations and/or constraints on the traces of generative functions. Choice maps are also returned by certain Gen inference methods, and are used internally by various Gen inference methods.</p><p>Choice maps provide the following methods:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gen.has_value" href="#Gen.has_value"><code>Gen.has_value</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">has_value(choices::ChoiceMap, addr)</code></pre><p>Return true if there is a value at the given address.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/probcomp/Gen.jl/blob/0d40e48d1f37680e7b0675ac5d37b1d26c1efeb2/src/choice_map.jl#L48-L52">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gen.get_value" href="#Gen.get_value"><code>Gen.get_value</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">value = get_value(choices::ChoiceMap, addr)</code></pre><p>Return the value at the given address in the assignment, or throw a KeyError if no value exists. A syntactic sugar is <code>Base.getindex</code>:</p><pre><code class="nohighlight hljs">value = choices[addr]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/probcomp/Gen.jl/blob/0d40e48d1f37680e7b0675ac5d37b1d26c1efeb2/src/choice_map.jl#L23-L30">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gen.has_submap" href="#Gen.has_submap"><code>Gen.has_submap</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">has_submap(choices::ChoiceMap, addr)</code></pre><p>Return true if there is a non-empty sub-assignment at the given address.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/probcomp/Gen.jl/blob/0d40e48d1f37680e7b0675ac5d37b1d26c1efeb2/src/choice_map.jl#L33-L37">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gen.get_submap" href="#Gen.get_submap"><code>Gen.get_submap</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">submap = get_submap(choices::ChoiceMap, addr)</code></pre><p>Return the sub-assignment containing all choices whose address is prefixed by addr.</p><p>It is an error if the assignment contains a value at the given address. If there are no choices whose address is prefixed by addr then return an <code>EmptyChoiceMap</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/probcomp/Gen.jl/blob/0d40e48d1f37680e7b0675ac5d37b1d26c1efeb2/src/choice_map.jl#L12-L20">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gen.get_values_shallow" href="#Gen.get_values_shallow"><code>Gen.get_values_shallow</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">key_submap_iterable = get_values_shallow(choices::ChoiceMap)</code></pre><p>Return an iterator over tuples of the form <code>(key, value)</code> for each top-level key associated with a value.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/probcomp/Gen.jl/blob/0d40e48d1f37680e7b0675ac5d37b1d26c1efeb2/src/choice_map.jl#L55-L60">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gen.get_submaps_shallow" href="#Gen.get_submaps_shallow"><code>Gen.get_submaps_shallow</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">key_submap_iterable = get_submaps_shallow(choices::ChoiceMap)</code></pre><p>Return an iterator over tuples of the form <code>(key, submap::ChoiceMap)</code> for each top-level key that has a non-empty sub-assignment.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/probcomp/Gen.jl/blob/0d40e48d1f37680e7b0675ac5d37b1d26c1efeb2/src/choice_map.jl#L40-L45">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gen.to_array" href="#Gen.to_array"><code>Gen.to_array</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">arr::Vector{T} = to_array(choices::ChoiceMap, ::Type{T}) where {T}</code></pre><p>Populate an array with values of choices in the given assignment.</p><p>It is an error if each of the values cannot be coerced into a value of the given type.</p><p><strong>Implementation</strong></p><p>To support <code>to_array</code>, a concrete subtype <code>T &lt;: ChoiceMap</code> should implement the following method:</p><pre><code class="nohighlight hljs">n::Int = _fill_array!(choices::T, arr::Vector{V}, start_idx::Int) where {V}</code></pre><p>Populate <code>arr</code> with values from the given assignment, starting at <code>start_idx</code>, and return the number of elements in <code>arr</code> that were populated.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/probcomp/Gen.jl/blob/0d40e48d1f37680e7b0675ac5d37b1d26c1efeb2/src/choice_map.jl#L154-L171">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gen.from_array" href="#Gen.from_array"><code>Gen.from_array</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">choices::ChoiceMap = from_array(proto_choices::ChoiceMap, arr::Vector)</code></pre><p>Return an assignment with the same address structure as a prototype assignment, but with values read off from the given array.</p><p>The order in which addresses are populated is determined by the prototype assignment. It is an error if the number of choices in the prototype assignment is not equal to the length the array.</p><p><strong>Implementation</strong></p><p>To support <code>from_array</code>, a concrete subtype <code>T &lt;: ChoiceMap</code> should implement the following method:</p><pre><code class="nohighlight hljs">(n::Int, choices::T) = _from_array(proto_choices::T, arr::Vector{V}, start_idx::Int) where {V}</code></pre><p>Return an assignment with the same address structure as a prototype assignment, but with values read off from <code>arr</code>, starting at position <code>start_idx</code>, and the number of elements read from <code>arr</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/probcomp/Gen.jl/blob/0d40e48d1f37680e7b0675ac5d37b1d26c1efeb2/src/choice_map.jl#L197-L218">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gen.get_selected" href="#Gen.get_selected"><code>Gen.get_selected</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">selected_choices = get_selected(choices::ChoiceMap, selection::Selection)</code></pre><p>Filter the choice map to include only choices in the given selection.</p><p>Returns a new choice map.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/probcomp/Gen.jl/blob/0d40e48d1f37680e7b0675ac5d37b1d26c1efeb2/src/choice_map.jl#L1029-L1035">source</a></section></article><p>Note that none of these methods mutate the choice map.</p><p>Choice maps also implement:</p><ul><li><p><code>Base.isempty</code>, which tests of there are no random choices in the choice map</p></li><li><p><code>Base.merge</code>, which takes two choice maps, and returns a new choice map containing all random choices in either choice map. It is an error if the choice maps both have values at the same address, or if one choice map has a value at an address that is the prefix of the address of a value in the other choice map.</p></li><li><p><code>==</code>, which tests if two choice maps have the same addresses and values at those addresses.</p></li></ul><p>Gen.jl defines the following concrete types for choice maps:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gen.DynamicChoiceMap" href="#Gen.DynamicChoiceMap"><code>Gen.DynamicChoiceMap</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">DynamicChoiceMap &lt;: ChoiceMap</code></pre><p>A mutable map from arbitrary hierarchical addresses to values.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/probcomp/Gen.jl/blob/0d40e48d1f37680e7b0675ac5d37b1d26c1efeb2/src/choice_map.jl#L629-L634">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gen.EmptyChoiceMap" href="#Gen.EmptyChoiceMap"><code>Gen.EmptyChoiceMap</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">EmptyChoiceMap &lt;: ChoiceMap</code></pre><p>An empty choice map.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/probcomp/Gen.jl/blob/0d40e48d1f37680e7b0675ac5d37b1d26c1efeb2/src/choice_map.jl#L917-L921">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gen.StaticChoiceMap" href="#Gen.StaticChoiceMap"><code>Gen.StaticChoiceMap</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">StaticChoiceMap &lt;: ChoiceMap</code></pre><p>An immutable mapping statically-traced addresses to values.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/probcomp/Gen.jl/blob/0d40e48d1f37680e7b0675ac5d37b1d26c1efeb2/src/choice_map.jl#L365-L369">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gen.choicemap" href="#Gen.choicemap"><code>Gen.choicemap</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">choices = choicemap()</code></pre><p>Construct an empty mutable choice map.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/probcomp/Gen.jl/blob/0d40e48d1f37680e7b0675ac5d37b1d26c1efeb2/src/choice_map.jl#L687-L691">source</a></section><section><div><pre><code class="language-julia hljs">choices = choicemap(tuples...)</code></pre><p>Construct a mutable choice map initialized with given address, value tuples.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/probcomp/Gen.jl/blob/0d40e48d1f37680e7b0675ac5d37b1d26c1efeb2/src/choice_map.jl#L696-L700">source</a></section></article><p>A mutable choice map can be constructed with <a href="#Gen.choicemap"><code>choicemap</code></a>, and then populated:</p><pre><code class="language-julia hljs">choices = choicemap()
choices[:x] = true
choices[&quot;foo&quot;] = 1.25
choices[:y =&gt; 1 =&gt; :z] = -6.3</code></pre><p>There is also a constructor that takes initial (address, value) pairs:</p><pre><code class="language-julia hljs">choices = choicemap((:x, true), (&quot;foo&quot;, 1.25), (:y =&gt; 1 =&gt; :z, -6.3))</code></pre><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gen.set_value!" href="#Gen.set_value!"><code>Gen.set_value!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">set_value!(choices::DynamicChoiceMap, addr, value)</code></pre><p>Set the given value for the given address.</p><p>Will cause any previous value or sub-assignment at this address to be deleted. It is an error if there is already a value present at some prefix of the given address.</p><p>The following syntactic sugar is provided:</p><pre><code class="nohighlight hljs">choices[addr] = value</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/probcomp/Gen.jl/blob/0d40e48d1f37680e7b0675ac5d37b1d26c1efeb2/src/choice_map.jl#L737-L748">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gen.set_submap!" href="#Gen.set_submap!"><code>Gen.set_submap!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">set_submap!(choices::DynamicChoiceMap, addr, submap::ChoiceMap)</code></pre><p>Replace the sub-assignment rooted at the given address with the given sub-assignment. Set the given value for the given address.</p><p>Will cause any previous value or sub-assignment at the given address to be deleted. It is an error if there is already a value present at some prefix of address.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/probcomp/Gen.jl/blob/0d40e48d1f37680e7b0675ac5d37b1d26c1efeb2/src/choice_map.jl#L771-L779">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.merge-Tuple{ChoiceMap, ChoiceMap}" href="#Base.merge-Tuple{ChoiceMap, ChoiceMap}"><code>Base.merge</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">choices = Base.merge(choices1::ChoiceMap, choices2::ChoiceMap)</code></pre><p>Merge two choice maps.</p><p>It is an error if the choice maps both have values at the same address, or if one choice map has a value at an address that is the prefix of the address of a value in the other choice map.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/probcomp/Gen.jl/blob/0d40e48d1f37680e7b0675ac5d37b1d26c1efeb2/src/choice_map.jl#L237-L245">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.merge-Tuple{ChoiceMap, Vararg{ChoiceMap}}" href="#Base.merge-Tuple{ChoiceMap, Vararg{ChoiceMap}}"><code>Base.merge</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Variadic merge of choice maps.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/probcomp/Gen.jl/blob/0d40e48d1f37680e7b0675ac5d37b1d26c1efeb2/src/choice_map.jl#L277-L279">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.isempty-Tuple{ChoiceMap}" href="#Base.isempty-Tuple{ChoiceMap}"><code>Base.isempty</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Base.isempty(choices::ChoiceMap)</code></pre><p>Return true if there are no values in the assignment.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/probcomp/Gen.jl/blob/0d40e48d1f37680e7b0675ac5d37b1d26c1efeb2/src/choice_map.jl#L70-L74">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gen.pair" href="#Gen.pair"><code>Gen.pair</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">choices = pair(choices1::ChoiceMap, choices2::ChoiceMap, key1::Symbol, key2::Symbol)</code></pre><p>Return an assignment that contains <code>choices1</code> as a sub-assignment under <code>key1</code> and <code>choices2</code> as a sub-assignment under <code>key2</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/probcomp/Gen.jl/blob/0d40e48d1f37680e7b0675ac5d37b1d26c1efeb2/src/choice_map.jl#L465-L470">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gen.unpair" href="#Gen.unpair"><code>Gen.unpair</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">(choices1, choices2) = unpair(choices::ChoiceMap, key1::Symbol, key2::Symbol)</code></pre><p>Return the two sub-assignments at <code>key1</code> and <code>key2</code>, one or both of which may be empty.</p><p>It is an error if there are any top-level values, or any non-empty top-level sub-assignments at keys other than <code>key1</code> and <code>key2</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/probcomp/Gen.jl/blob/0d40e48d1f37680e7b0675ac5d37b1d26c1efeb2/src/choice_map.jl#L476-L483">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Gen.ChoiceMapNestedView" href="#Gen.ChoiceMapNestedView"><code>Gen.ChoiceMapNestedView</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Wrapper for a <code>ChoiceMap</code> that provides nested-dict–like syntax, rather than the default syntax which looks like a flat dict of full keypaths.</p><pre><code class="language-julia-repl hljs">julia&gt; using Gen
julia&gt; c = choicemap((:a, 1),
                     (:b =&gt; :c, 2));
julia&gt; cv = nested_view(c);
julia&gt; c[:a] == cv[:a]
true
julia&gt; c[:b =&gt; :c] == cv[:b][:c]
true
julia&gt; length(cv)
2
julia&gt; length(cv[:b])
1
julia&gt; sort(collect(keys(cv)))
[:a, :b]
julia&gt; sort(collect(keys(cv[:b])))
[:c]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/probcomp/Gen.jl/blob/0d40e48d1f37680e7b0675ac5d37b1d26c1efeb2/src/choice_map.jl#L938-L960">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../gfi/">« Generative Function Interface</a><a class="docs-footer-nextpage" href="../selections/">Selections »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Saturday 4 October 2025 09:59">Saturday 4 October 2025</span>. Using Julia version 1.10.10.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
