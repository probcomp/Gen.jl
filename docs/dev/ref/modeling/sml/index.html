<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Static Modeling Language · Gen.jl</title><meta name="title" content="Static Modeling Language · Gen.jl"/><meta property="og:title" content="Static Modeling Language · Gen.jl"/><meta property="twitter:title" content="Static Modeling Language · Gen.jl"/><meta name="description" content="Documentation for Gen.jl."/><meta property="og:description" content="Documentation for Gen.jl."/><meta property="twitter:description" content="Documentation for Gen.jl."/><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../search_index.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">Gen.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../../">Gen.jl</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../tutorials/getting_started/">Getting Started</a></li><li><a class="tocitem" href="../../../tutorials/modeling_in_gen/">Introduction to Modeling in Gen</a></li><li><a class="tocitem" href="../../../tutorials/mcmc_map/">Basics of MCMC and MAP Inference</a></li><li><a class="tocitem" href="../../../tutorials/enumerative/">Debugging Models with Enumeration</a></li><li><a class="tocitem" href="../../../tutorials/smc/">Object Tracking with SMC</a></li><li><a class="tocitem" href="../../../tutorials/vi/">Variational Inference in Gen</a></li><li><a class="tocitem" href="../../../tutorials/learning_gen_fns/">Learning Generative Functions</a></li><li><a class="tocitem" href="../../../tutorials/scaling_with_sml/">Speeding Up Inference with the SML</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">How-to Guides</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../how_to/extending_gen/">Extending Gen</a></li><li><a class="tocitem" href="../../../how_to/custom_distributions/">Adding New Distributions</a></li><li><a class="tocitem" href="../../../how_to/custom_gen_fns/">Adding New Generative Functions</a></li><li><a class="tocitem" href="../../../how_to/custom_gradients/">Custom Gradients</a></li><li><a class="tocitem" href="../../../how_to/custom_incremental_computation/">Custom Incremental Computation</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox" checked/><label class="tocitem" for="menuitem-4"><span class="docs-label">Reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-4-1" type="checkbox"/><label class="tocitem" for="menuitem-4-1"><span class="docs-label">Core Interfaces</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../core/gfi/">Generative Function Interface</a></li><li><a class="tocitem" href="../../core/choice_maps/">Choice Maps</a></li><li><a class="tocitem" href="../../core/selections/">Selections</a></li><li><a class="tocitem" href="../../core/change_hints/">Change Hints</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-2" type="checkbox" checked/><label class="tocitem" for="menuitem-4-2"><span class="docs-label">Modeling Library</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../dml/">Built-In Modeling Language</a></li><li class="is-active"><a class="tocitem" href>Static Modeling Language</a><ul class="internal"><li><a class="tocitem" href="#Static-Computation-Graphs"><span>Static Computation Graphs</span></a></li><li><a class="tocitem" href="#Restrictions"><span>Restrictions</span></a></li><li><a class="tocitem" href="#Loading-generated-functions"><span>Loading generated functions</span></a></li><li><a class="tocitem" href="#Performance-tips"><span>Performance tips</span></a></li><li><a class="tocitem" href="#Caching-Julia-values"><span>Caching Julia values</span></a></li></ul></li><li><a class="tocitem" href="../distributions/">Probability Distributions</a></li><li><a class="tocitem" href="../combinators/">Combinators</a></li><li><a class="tocitem" href="../custom_gen_fns/">Custom Generative Functions</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-3" type="checkbox"/><label class="tocitem" for="menuitem-4-3"><span class="docs-label">Inference Library</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../inference/enumerative/">Enumerative Inference</a></li><li><a class="tocitem" href="../../inference/importance/">Importance Sampling</a></li><li><a class="tocitem" href="../../inference/mcmc/">Markov Chain Monte Carlo</a></li><li><a class="tocitem" href="../../inference/pf/">Particle Filtering &amp; SMC</a></li><li><a class="tocitem" href="../../inference/trace_translators/">Trace Translators</a></li><li><a class="tocitem" href="../../inference/parameter_optimization/">Parameter Optimization</a></li><li><a class="tocitem" href="../../inference/map/">MAP Optimization</a></li><li><a class="tocitem" href="../../inference/vi/">Variational Inference</a></li><li><a class="tocitem" href="../../inference/wake_sleep/">Wake-Sleep Learning</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-4" type="checkbox"/><label class="tocitem" for="menuitem-4-4"><span class="docs-label">Internals</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../internals/language_implementation/">Modeling Language Implementation</a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Reference</a></li><li><a class="is-disabled">Modeling Library</a></li><li class="is-active"><a href>Static Modeling Language</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Static Modeling Language</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/probcomp/Gen.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/probcomp/Gen.jl/blob/master/docs/src/ref/modeling/sml.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="sml"><a class="docs-heading-anchor" href="#sml">Static Modeling Language</a><a id="sml-1"></a><a class="docs-heading-anchor-permalink" href="#sml" title="Permalink"></a></h1><p>The <strong>Static Modeling Language (SML)</strong> is a restricted variant of the built-in <a href="../dml/#dml">dynamic modeling language</a>. Models written in the static modeling language can result in better inference performance (more inference operations per second and less memory consumption), than the full built-in modeling language, especially for models used with iterative inference algorithms like <a href="../../inference/mcmc/#mcmc">Markov Chain Monte Carlo</a> or <a href="../../inference/pf/#particle_filtering">particle filtering</a>.</p><p>A function is identified as using the static modeling language by adding the <code>static</code> annotation to the function. For example:</p><pre><code class="language-julia hljs">@gen (static) function foo(prob::Float64)
    z1 = @trace(bernoulli(prob), :a)
    z2 = @trace(bernoulli(prob), :b)
    z3 = z1 || z2
    z4 = !z3
    return z4
end</code></pre><p>After running this code, <code>foo</code> is a Julia value whose type is a subtype of <code>StaticIRGenerativeFunction</code>, which is a subtype of <a href="../../core/gfi/#Gen.GenerativeFunction"><code>GenerativeFunction</code></a>.</p><h2 id="Static-Computation-Graphs"><a class="docs-heading-anchor" href="#Static-Computation-Graphs">Static Computation Graphs</a><a id="Static-Computation-Graphs-1"></a><a class="docs-heading-anchor-permalink" href="#Static-Computation-Graphs" title="Permalink"></a></h2><p>Using the <code>static</code> annotation instructs Gen to statically construct a directed acyclic graph for the computation represented by the body of the function. For the function <code>foo</code> above, the static graph looks like:</p><div style="text-align:center">
    <img src="../../../assets/static_graph.png" alt="example static computation graph" width="50%"/>
</div><p>In this graph, oval nodes represent random choices, square nodes represent Julia computations, and diamond nodes represent arguments. The light blue shaded node is the return value of the function. Having access to the static graph allows Gen to generate specialized code for <a href="../../core/gfi/#Updating-traces">Updating traces</a> that skips unecessary parts of the computation. Specifically, when applying an update operation, the graph is analyzed, and each value in the graph identified as having possibly changed, or not. Nodes in the graph do not need to be re-executed if none of their input values could have possibly changed. Also, even if some inputs to a generative function node may have changed, knowledge that some of the inputs have not changed often allows the generative function being called to more efficiently perform its update operation. This is the case for functions produced by <a href="../combinators/#combinators">Generative Function Combinators</a>.</p><p>You can plot the graph for a function with the <code>static</code> annotation if you have PyCall installed, and a Python environment that contains the <a href="https://pypi.org/project/graphviz/">graphviz</a> Python package, using, e.g.:</p><pre><code class="language-julia hljs">using PyCall
@pyimport graphviz
using Gen: draw_graph
draw_graph(foo, graphviz, &quot;test&quot;)</code></pre><p>This will produce a file <code>test.pdf</code> in the current working directory containing the rendered graph.</p><h2 id="Restrictions"><a class="docs-heading-anchor" href="#Restrictions">Restrictions</a><a id="Restrictions-1"></a><a class="docs-heading-anchor-permalink" href="#Restrictions" title="Permalink"></a></h2><p>First, the definition of a <code>(static)</code> generative function is always expected to occur as a <a href="https://docs.julialang.org/en/v1/manual/modules/">top-level definition</a> (aka global variable); usage in non–top-level scopes is unsupported and may result in incorrect behavior.</p><p>Next, in order to be able to construct the static graph, Gen restricts the permitted syntax that can be used in functions annotated with <code>static</code>. In particular, each statement in the body must be one of the following:</p><ul><li>A <code>@param</code> statement specifying any <a href="../dml/#trainable_parameters_modeling">trainable parameters</a>, e.g.:</li></ul><pre><code class="language-julia hljs">@param theta::Float64</code></pre><ul><li>An assignment, with a symbol or tuple of symbols on the left-hand side, and a Julia expression on the right-hand side, which may include <code>@trace</code> expressions, e.g.:</li></ul><pre><code class="language-julia hljs">mu, sigma = @trace(bernoulli(p), :x) ? (mu1, sigma1) : (mu2, sigma2)</code></pre><ul><li>A top-level <code>@trace</code> expression, e.g.:</li></ul><pre><code class="language-julia hljs">@trace(bernoulli(1-prob_tails), :flip)</code></pre><p>All <code>@trace</code> expressions must use a literal Julia symbol for the first component in the address. Unlike the full built-in modeling-language, the address is not optional.</p><ul><li>A <code>return</code> statement, with a Julia expression on the right-hand side, e.g.:</li></ul><pre><code class="language-julia hljs">return @trace(geometric(prob), :n_flips) + 1</code></pre><p>The functions are also subject to the following restrictions:</p><ul><li><p>Default argument values are not supported.</p></li><li><p>Constructing named or anonymous Julia functions (and closures) is not allowed.</p></li><li><p>List comprehensions with internal <code>@trace</code> calls are not allowed.</p></li><li><p>Splatting within <code>@trace</code> calls is not supported</p></li><li><p>Generative functions that are passed in as arguments cannot be traced.</p></li><li><p>For composite addresses (e.g. <code>:a =&gt; 2 =&gt; :c</code>) the first component of the address must be a literal symbol, and there may only be one statement in the function body that uses this symbol for the first component of its address.</p></li><li><p>Julia control flow constructs (e.g. <code>if</code>, <code>for</code>, <code>while</code>) cannot be used as top-level statements in the function body. Control flow should be implemented inside either Julia functions that are called, or other generative functions.</p></li></ul><p>Certain loop constructs can be implemented using <a href="../combinators/#combinators">Generative Function Combinators</a> instead. For example, the following loop:</p><pre><code class="language-julia hljs">for (i, prob) in enumerate(probs)
    @trace(foo(prob), :foo =&gt; i)
end</code></pre><p>can instead be implemented as:</p><pre><code class="language-julia hljs">@trace(Map(foo)(probs), :foo)</code></pre><h2 id="Loading-generated-functions"><a class="docs-heading-anchor" href="#Loading-generated-functions">Loading generated functions</a><a id="Loading-generated-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Loading-generated-functions" title="Permalink"></a></h2><p>Once a <code>(static)</code> generative function is defined, it can be used in the same way as a non-static generative function. In previous versions of Gen, the <code>@load_generated_functions</code> macro had to be called before a function with a <code>(static)</code> annotation could be used. This macro is no longer necessary, and will be removed in a future release.</p><h2 id="Performance-tips"><a class="docs-heading-anchor" href="#Performance-tips">Performance tips</a><a id="Performance-tips-1"></a><a class="docs-heading-anchor-permalink" href="#Performance-tips" title="Permalink"></a></h2><p>For better performance when the arguments are simple data types like <code>Float64</code>, annotate the arguments with the concrete type. This permits a more optimized trace data structure to be generated for the generative function.</p><h2 id="Caching-Julia-values"><a class="docs-heading-anchor" href="#Caching-Julia-values">Caching Julia values</a><a id="Caching-Julia-values-1"></a><a class="docs-heading-anchor-permalink" href="#Caching-Julia-values" title="Permalink"></a></h2><p>By default, the values of Julia computations (all calls that are not random choices or calls to generative functions) are cached as part of the trace, so that <a href="../../core/gfi/#Updating-traces">Updating traces</a> can avoid unecessary re-execution of Julia code. However, this cache may grow the memory footprint of a trace. To disable caching of Julia values, use the function annotation <code>nojuliacache</code> (this annotation is ignored unless the <code>static</code> function annotation is also used).</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../dml/">« Built-In Modeling Language</a><a class="docs-footer-nextpage" href="../distributions/">Probability Distributions »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.15.0 on <span class="colophon-date" title="Wednesday 22 October 2025 13:13">Wednesday 22 October 2025</span>. Using Julia version 1.10.10.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
